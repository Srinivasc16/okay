<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For My Love ‚ú®</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&family=Playfair+Display:ital,wght@1,400;1,500;1,700&display=swap" rel="stylesheet">

<style>
:root {
    --md-sys-color-bg: #000000;
    --md-sys-color-surface: #101010;
    --md-sys-color-surface-variant: #1f1f1f;
    --md-sys-color-primary: #ffb7cd;
    --md-sys-color-on-primary: #541d2d;
    --md-sys-color-accent: #ff6b9d;
    --glass-border: rgba(255, 255, 255, 0.08);
    --glass-strong: rgba(255, 255, 255, 0.15);
    --motion-expressive: cubic-bezier(0.05, 0.7, 0.1, 1.0); 
    --motion-melt: cubic-bezier(0.4, 0.0, 0.2, 1);
    --motion-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

* { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

body {
    background-color: var(--md-sys-color-bg);
    color: #f0f0f0;
    font-family: 'Plus Jakarta Sans', sans-serif;
    height: 100vh;
    display: flex;
    overflow: hidden;
    position: relative;
}

.noise-overlay {
    position: fixed; inset: 0; pointer-events: none; z-index: 500;
    opacity: 0.05;
    background: url('data:image/svg+xml;utf8,%3Csvg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"%3E%3Cfilter id="n"%3E%3CfeTurbulence type="fractalNoise" baseFrequency="0.7" stitchTiles="stitch"/%3E%3C/filter%3E%3Crect width="100%25" height="100%25" filter="url(%23n)"/%3E%3C/svg%3E');
}

.orb {
    position: fixed; border-radius: 50%; filter: blur(100px); opacity: 0.5;
    animation: floatOrb 15s infinite ease-in-out alternate;
    z-index: 0;
    will-change: transform;
}
.orb-1 { 
    top: -15%; left: -15%; width: 60vw; height: 60vw; 
    background: radial-gradient(circle, #ff0055, #ff4477, transparent 70%); 
}
.orb-2 { 
    bottom: -15%; right: -15%; width: 70vw; height: 70vw; 
    background: radial-gradient(circle, #6a00ff, #8844ff, transparent 70%); 
    animation-delay: -7s; 
}
.orb-3 {
    top: 50%; left: 50%; width: 40vw; height: 40vw;
    background: radial-gradient(circle, #ff69b4, transparent 70%);
    animation-delay: -3s;
    opacity: 0.3;
}

@keyframes floatOrb { 
    0% { transform: scale(1) translate(0,0) rotate(0deg); } 
    100% { transform: scale(1.2) translate(30px, -30px) rotate(180deg); } 
}

.floating-hearts {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 1;
    overflow: hidden;
}

.floating-heart {
    position: absolute;
    font-size: 20px;
    opacity: 0;
    animation: floatHeart 12s infinite ease-in-out;
}

@keyframes floatHeart {
    0% { 
        opacity: 0;
        transform: translateY(100vh) translateX(0) rotate(0deg) scale(0);
    }
    10% {
        opacity: 0.6;
        transform: translateY(80vh) translateX(20px) rotate(45deg) scale(1);
    }
    90% {
        opacity: 0.6;
        transform: translateY(-10vh) translateX(-20px) rotate(315deg) scale(0.8);
    }
    100% {
        opacity: 0;
        transform: translateY(-20vh) translateX(0) rotate(360deg) scale(0);
    }
}

.nav-rail {
    width: 90px;
    height: 100%;
    background: rgba(10, 10, 10, 0.5);
    backdrop-filter: blur(30px);
    -webkit-backdrop-filter: blur(30px);
    border-right: 1px solid var(--glass-border);
    display: flex;
    flex-direction: column;
    align-items: center;
    padding-top: 50px;
    gap: 15px;
    z-index: 100;
    transition: transform 0.6s var(--motion-expressive), opacity 0.6s;
    position: relative;
}

.nav-rail.collapsed {
    transform: translateX(-100%);
}

.nav-rail::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(180deg, rgba(255,183,205,0.05) 0%, transparent 100%);
    pointer-events: none;
}

.nav-logo { 
    font-size: 2rem; 
    margin-bottom: 20px; 
    animation: heartbeat 2s ease-in-out infinite;
    cursor: pointer;
    filter: drop-shadow(0 0 10px rgba(255,183,205,0.5));
}

@keyframes heartbeat {
    0%, 100% { transform: scale(1); }
    10% { transform: scale(1.2); }
    20% { transform: scale(1); }
}

.nav-btn {
    width: 60px; height: 60px;
    border-radius: 20px;
    border: none;
    background: transparent;
    color: #666;
    cursor: pointer;
    display: flex; 
    flex-direction: column; 
    align-items: center; 
    justify-content: center;
    transition: all 0.5s var(--motion-expressive);
    position: relative;
    overflow: hidden;
}

.nav-btn::before {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(circle, var(--md-sys-color-primary), transparent);
    opacity: 0;
    transition: opacity 0.5s;
}

.nav-btn:hover::before {
    opacity: 0.1;
}

.nav-btn svg { 
    width: 28px; 
    height: 28px; 
    fill: currentColor; 
    margin-bottom: 4px; 
    transition: transform 0.5s var(--motion-bounce);
    position: relative;
    z-index: 1;
}

.nav-btn span { 
    font-size: 0.65rem; 
    font-weight: 700; 
    opacity: 0; 
    transform: translateY(5px); 
    transition: all 0.4s;
    position: relative;
    z-index: 1;
}

.nav-btn.active {
    background: linear-gradient(135deg, var(--md-sys-color-primary), var(--md-sys-color-accent));
    color: var(--md-sys-color-on-primary);
    box-shadow: 0 0 30px rgba(255, 183, 205, 0.5), 0 10px 20px rgba(0,0,0,0.3);
    transform: scale(1.05);
}
.nav-btn.active svg { transform: translateY(-3px) scale(1.1); }
.nav-btn.active span { opacity: 1; transform: translateY(0); }
.nav-btn:hover:not(.active) { 
    background: rgba(255,255,255,0.08); 
    color: #fff; 
    transform: translateY(-2px);
}

.sidebar-toggle {
    position: fixed;
    top: 30px;
    left: 20px;
    width: 50px;
    height: 50px;
    background: rgba(255, 183, 205, 0.2);
    backdrop-filter: blur(20px);
    border: 1px solid var(--glass-strong);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 101;
    transition: all 0.4s var(--motion-expressive);
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
}

.sidebar-toggle:hover {
    background: rgba(255, 183, 205, 0.3);
    transform: scale(1.1) rotate(90deg);
    box-shadow: 0 5px 25px rgba(255, 183, 205, 0.4);
}

.sidebar-toggle svg {
    width: 24px;
    height: 24px;
    fill: var(--md-sys-color-primary);
    transition: transform 0.4s;
}

.nav-rail.collapsed ~ .sidebar-toggle svg {
    transform: rotate(180deg);
}

.music-player {
    margin-top: auto;
    margin-bottom: 30px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
}

.music-btn {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    border: 2px solid var(--glass-strong);
    background: linear-gradient(135deg, rgba(255, 105, 180, 0.2), rgba(138, 43, 226, 0.2));
    backdrop-filter: blur(20px);
    color: var(--md-sys-color-primary);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.4s var(--motion-bounce);
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    position: relative;
    overflow: hidden;
}

.music-btn::before {
    content: '';
    position: absolute;
    inset: -50%;
    background: conic-gradient(from 0deg, transparent, var(--md-sys-color-primary), transparent);
    animation: rotateBorder 3s linear infinite;
    opacity: 0;
}

.music-btn.playing::before {
    opacity: 0.5;
}

@keyframes rotateBorder {
    to { transform: rotate(360deg); }
}

.music-btn svg {
    width: 28px;
    height: 28px;
    fill: currentColor;
    position: relative;
    z-index: 1;
}

.music-btn:hover {
    transform: scale(1.15);
    border-color: var(--md-sys-color-primary);
    box-shadow: 0 5px 25px rgba(255, 183, 205, 0.5);
}

.music-btn.playing {
    animation: pulse 1.5s ease-in-out infinite;
}

@keyframes pulse {
    0%, 100% { box-shadow: 0 5px 15px rgba(255, 183, 205, 0.3); }
    50% { box-shadow: 0 5px 30px rgba(255, 183, 205, 0.6); }
}

.music-visualizer {
    display: flex;
    gap: 3px;
    height: 20px;
    align-items: flex-end;
    opacity: 0;
    transition: opacity 0.4s;
}

.music-visualizer.active {
    opacity: 1;
}

.music-bar {
    width: 3px;
    background: linear-gradient(to top, var(--md-sys-color-accent), var(--md-sys-color-primary));
    border-radius: 2px;
    animation: musicBounce 0.8s ease-in-out infinite;
}

.music-bar:nth-child(1) { animation-delay: 0s; }
.music-bar:nth-child(2) { animation-delay: 0.1s; }
.music-bar:nth-child(3) { animation-delay: 0.2s; }
.music-bar:nth-child(4) { animation-delay: 0.3s; }
.music-bar:nth-child(5) { animation-delay: 0.4s; }

@keyframes musicBounce {
    0%, 100% { height: 5px; }
    50% { height: 20px; }
}

.stage {
    flex: 1;
    position: relative;
    overflow-y: auto;
    overflow-x: hidden;
    scroll-behavior: smooth;
    padding: 60px 80px;
    z-index: 10;
    transition: margin-left 0.6s var(--motion-expressive);
}

.stage.sidebar-collapsed {
    margin-left: 0;
}

.stage::-webkit-scrollbar { width: 8px; }
.stage::-webkit-scrollbar-track { background: rgba(255,255,255,0.05); }
.stage::-webkit-scrollbar-thumb { 
    background: linear-gradient(to bottom, var(--md-sys-color-primary), var(--md-sys-color-accent)); 
    border-radius: 10px; 
}

.tab-content {
    display: none;
    max-width: 1200px;
    margin: 0 auto;
    animation: pageEnter 1s var(--motion-expressive) forwards;
}
.tab-content.active { display: block; }

@keyframes pageEnter {
    from { 
        opacity: 0; 
        transform: translateY(60px) scale(0.95); 
        filter: blur(15px); 
    }
    to { 
        opacity: 1; 
        transform: translateY(0) scale(1); 
        filter: blur(0); 
    }
}

h1 {
    font-family: 'Playfair Display', serif;
    font-size: 4.5rem;
    font-weight: 700;
    line-height: 1.1;
    background: linear-gradient(135deg, #fff 0%, #ffb7cd 50%, #ff6b9d 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom: 15px;
    animation: titleGlow 3s ease-in-out infinite;
}

@keyframes titleGlow {
    0%, 100% { filter: drop-shadow(0 0 20px rgba(255, 183, 205, 0.3)); }
    50% { filter: drop-shadow(0 0 40px rgba(255, 183, 205, 0.6)); }
}

.subtitle { 
    color: #999; 
    font-size: 1.15rem; 
    letter-spacing: 2px; 
    margin-bottom: 60px; 
    font-weight: 300;
    animation: fadeIn 1.5s ease-out;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

.gallery {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: 10px;
    padding-bottom: 100px;
}

.memory-card {
    position: relative;
    aspect-ratio: 3/4;
    background: var(--md-sys-color-surface-variant);
    border-radius: 32px;
    overflow: hidden;
    cursor: pointer;
    box-shadow: 0 8px 20px rgba(0,0,0,0.4);
    transition: all 0.6s var(--motion-expressive);
    border: 1px solid var(--glass-border);
}

.memory-card::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, rgba(255,183,205,0.1), transparent);
    opacity: 0;
    transition: opacity 0.6s;
    z-index: 1;
    pointer-events: none;
}

.memory-card:hover { 
    transform: translateY(-10px) scale(1.03); 
    z-index: 5; 
    box-shadow: 0 30px 60px rgba(255, 183, 205, 0.3), 0 0 40px rgba(255, 183, 205, 0.2);
    border-color: var(--glass-strong);
}

.memory-card:hover::before {
    opacity: 1;
}

.memory-card img {
    width: 100%; 
    height: 100%; 
    object-fit: cover;
    filter: blur(60px) grayscale(100%) brightness(0.3);
    transform: scale(1.2); 
    transition: all 2s var(--motion-melt);
    will-change: filter, transform;
}

.lock-screen {
    position: absolute; 
    inset: 0;
    display: flex; 
    flex-direction: column; 
    align-items: center; 
    justify-content: center;
    background: rgba(0,0,0,0.4);
    backdrop-filter: blur(5px);
    transition: all 1s;
    z-index: 2;
}

.lock-icon {
    width: 60px; 
    height: 60px;
    background: rgba(255,255,255,0.15);
    backdrop-filter: blur(15px);
    border-radius: 50%;
    display: flex; 
    align-items: center; 
    justify-content: center;
    font-size: 1.5rem;
    border: 2px solid rgba(255,255,255,0.3);
    box-shadow: 0 0 30px rgba(255,183,205,0.2);
    transition: all 0.4s var(--motion-bounce);
}

.memory-card:hover .lock-icon { 
    transform: scale(1.2) rotate(10deg); 
    background: rgba(255,255,255,0.25); 
    color: var(--md-sys-color-primary);
    box-shadow: 0 0 40px rgba(255,183,205,0.5);
}

.memory-card.revealed img { 
    filter: blur(0px) grayscale(0%) brightness(1); 
    transform: scale(1); 
}
.memory-card.revealed .lock-screen { 
    opacity: 0; 
    pointer-events: none; 
    transform: scale(1.8); 
}

.glass-paper {
    background: linear-gradient(180deg, rgba(30,30,30,0.8) 0%, rgba(20,20,20,0.8) 100%);
    backdrop-filter: blur(50px);
    border: 1px solid var(--glass-border);
    padding: 70px;
    border-radius: 40px;
    box-shadow: 0 30px 80px rgba(0,0,0,0.5), inset 0 1px 0 rgba(255,255,255,0.1);
    position: relative;
    overflow: hidden;
}

.glass-paper::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.05), transparent);
    animation: shimmer 3s infinite;
}

@keyframes shimmer {
    to { left: 100%; }
}

.typing-area {
    font-size: 1.2rem; 
    line-height: 2; 
    color: #e0e0e0; 
    white-space: pre-wrap;
    position: relative;
    z-index: 1;
}

#poem-display {
    text-align: center; 
    font-family: 'Playfair Display', serif; 
    font-size: 2rem; 
    font-style: italic; 
    line-height: 2; 
    color: var(--md-sys-color-primary);
    text-shadow: 0 0 30px rgba(255, 183, 205, 0.4);
    animation: poemGlow 4s ease-in-out infinite;
}

@keyframes poemGlow {
    0%, 100% { 
        text-shadow: 0 0 20px rgba(255, 183, 205, 0.3);
        transform: scale(1);
    }
    50% { 
        text-shadow: 0 0 40px rgba(255, 183, 205, 0.6);
        transform: scale(1.02);
    }
}

.heart-particle {
    position: fixed; 
    pointer-events: none; 
    font-size: 2rem;
    animation: popUp 1.5s ease-out forwards; 
    z-index: 999;
    filter: drop-shadow(0 0 10px rgba(255, 183, 205, 0.8));
}

@keyframes popUp {
    0% { 
        opacity: 1; 
        transform: translate(-50%, -50%) scale(0.5) rotate(0deg); 
    }
    100% { 
        opacity: 0; 
        transform: translate(-50%, -200px) scale(2) rotate(360deg); 
    }
}

.welcome-message {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0);
    background: linear-gradient(135deg, rgba(20,20,20,0.95), rgba(40,20,30,0.95));
    backdrop-filter: blur(40px);
    border: 2px solid var(--md-sys-color-primary);
    border-radius: 40px;
    padding: 60px;
    text-align: center;
    z-index: 1000;
    box-shadow: 0 30px 90px rgba(0,0,0,0.8), 0 0 100px rgba(255, 183, 205, 0.3);
    opacity: 0;
    pointer-events: none;
}

.welcome-message.show {
    animation: welcomeIn 1s var(--motion-bounce) forwards;
    pointer-events: all;
}

@keyframes welcomeIn {
    to {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
    }
}

.welcome-message h2 {
    font-family: 'Playfair Display', serif;
    font-size: 3rem;
    background: linear-gradient(135deg, #fff, var(--md-sys-color-primary));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom: 20px;
}

.welcome-message p {
    font-size: 1.3rem;
    color: #ccc;
    margin-bottom: 30px;
}

.welcome-message button {
    background: linear-gradient(135deg, var(--md-sys-color-primary), var(--md-sys-color-accent));
    border: none;
    color: var(--md-sys-color-on-primary);
    padding: 18px 50px;
    border-radius: 30px;
    font-size: 1.1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.4s var(--motion-bounce);
    box-shadow: 0 10px 30px rgba(255, 183, 205, 0.4);
}

.welcome-message button:hover {
    transform: translateY(-3px) scale(1.05);
    box-shadow: 0 15px 40px rgba(255, 183, 205, 0.6);
}

@media (max-width: 768px) {
    body { flex-direction: column; }
    .nav-rail { 
        width: 100%; 
        height: 80px; 
        flex-direction: row; 
        justify-content: space-around; 
        padding: 10px 0; 
        position: fixed; 
        bottom: 0; 
        background: rgba(0,0,0,0.95); 
        backdrop-filter: blur(30px);
        border-top: 1px solid var(--glass-border);
        border-right: none;
        transform: translateX(0) !important;
    }
    .nav-rail.collapsed {
        transform: translateY(100%) !important;
    }
    .music-player {
        margin: 0;
        flex-direction: row;
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 102;
    }
    .sidebar-toggle {
        top: auto;
        bottom: 100px;
        left: 20px;
    }
    .stage { 
        padding: 40px 20px 120px 20px; 
        margin-left: 0 !important;
    }
    h1 { font-size: 3rem; }
    #poem-display { font-size: 1.5rem; }
    .glass-paper { padding: 40px 30px; }
    .gallery { 
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 25px;
    }
    .welcome-message {
        padding: 40px 30px;
    }
    .welcome-message h2 {
        font-size: 2rem;
    }
    .welcome-message p {
        font-size: 1.1rem;
    }
}
</style>
</head>
<body>

    <div class="noise-overlay"></div>
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>
    <div class="orb orb-3"></div>
    
    <div class="floating-hearts" id="floatingHearts"></div>

    <div class="welcome-message" id="welcomeMsg">
        <h2>Happy Birthday Baby! üíñ</h2>
        <p>I made something special just for you...</p>
        <button onclick="closeWelcome()">Open Your Gift ‚ú®</button>
    </div>

    <div class="sidebar-toggle" onclick="toggleSidebar()">
        <svg viewBox="0 0 24 24">
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
        </svg>
    </div>

    <nav class="nav-rail" id="navRail">
        <div class="nav-logo"></div>
        <button class="nav-btn active" onclick="navTo('gallery', this)">
            <svg viewBox="0 0 24 24"><path d="M11 21H5c-1.1 0-2-.9-2-2V5c0-1.1.9-2 2-2h6v18zm2 0h6c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-6v18z"/></svg>
            <span>Us</span>
        </button>
        <button class="nav-btn" onclick="navTo('letter', this)">
            <svg viewBox="0 0 24 24"><path d="M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"/></svg>
            <span>Letter</span>
        </button>
        <button class="nav-btn" onclick="navTo('poem', this)">
            <svg viewBox="0 0 24 24"><path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"/></svg>
            <span>Poem</span>
        </button>

        <div class="music-player">
            <button class="music-btn" id="musicBtn" onclick="toggleMusic()">
                <svg id="musicIcon" viewBox="0 0 24 24">
                    <path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"/>
                </svg>
            </button>
            <div class="music-visualizer" id="visualizer">
                <div class="music-bar"></div>
                <div class="music-bar"></div>
                <div class="music-bar"></div>
                <div class="music-bar"></div>
                <div class="music-bar"></div>
            </div>
        </div>
    </nav>

    <main class="stage" id="stage">
    <!-- ADD GALLERY TAB -->
    <section id="gallery" class="tab-content active">
        <h1>Our Memories üíï</h1>
        <p class="subtitle">EVERY MOMENT WITH YOU</p>
        <div class="gallery" id="grid"></div>
    </section>

    <!-- ADD LETTER TAB -->
    <section id="letter" class="tab-content">
        <div class="glass-paper">
            <h1 style="font-size: 3rem; margin-bottom: 30px;">To My Love üíå</h1>
            <div class="typing-area" id="letter-text"></div>
        </div>
    </section>

    <!-- EXISTING POEM SECTION -->
    <section id="poem" class="tab-content">
        <div style="height: 15vh"></div>
        <div id="poem-display"></div>
    </section>
</main>

    <audio id="bgMusic" loop>
        <source src="song.mp3" type="audio/mpeg">
    </audio>

<script>
    const CONFIG = {
        letter: `Happy birthday my baby girl. This past year wasn't filled with big ups and downs, but the one thing that never changed was you being by my side, and that means everything to me. I always try to be like you and show up when you need me, because your presence itself feels like comfort and support ‚ù§Ô∏è.

When I started studying, our chats reduced from long hours to just a few, but you never complained. You understood it was for our future, and that patience is something I truly admire in you. Even when life got busier for both of us, we still found time for each other, and that made me feel safe with you.

I forget things very easily, but I held on to these memories because I wanted to write something for you. I said I would write a letter, and even though this isn't a formal letter, I'm giving my full effort and heart to it üíó.

You are such a supportive girl, and I love you. Every day my love for you grows without me even noticing. You listen to me when I'm tired, confused, or frustrated, and somehow you always know how to calm my mind. I don't think I would have handled many things well without you. You guide me without forcing, you support me without expecting, and that's something I deeply value.

Sometimes I know my anger may have hurt you, and I'm really sorry for those moments, dear. I'm learning to control myself and handle things better. From now on, I will reduce the things that make you sad, because I never want to be the reason you feel hurt.

I will always support you kanna. I don't care what year it is 25, 26, or any other my support for you doesn't change. I want to be beside you for a lifetime. I'm here for you, and I love you so much üíû.

We started loving each other before, and every year our bond gets stronger. This year it grew even more, and I feel the future will be even better because we move forward together, supporting each other in everything.

This is not easy for me to write, but I wanted to do it for you. I love you so much raa babyyy. I'll always be here for you‚Äîevery day, every month, every year‚Äîand I'll love you through all of it.`,
        
        poem: `When the day turns heavy and the hours run long,<br>
Your voice is the quiet that steadies my mind.<br>
In the spaces between doubt and direction,<br>
You are the compass I did not know I needed.<br>
<br>
We walked not with perfect steps,<br>
But with matching pace.<br>
Side by side in silence,<br>
Side by side in storms,<br>
Side by side in work that demanded everything.<br>
<br>
You listened when my thoughts fell apart,<br>
And answered with ideas,<br>
Turning confusion into clarity,<br>
Turning fear into something smaller than your hand.<br>
<br>
If I failed, you stood;<br>
If I rose, you stayed.<br>
And love became not just feeling<br>
But a habit, a decision, a discipline.<br>
<br>
Happy birthday, my support, my steady light,<br>
You lift me up when paths get tight.<br>
Grateful for your strength and care,<br>
With you beside me, I go anywhere.<br>
`,
        
        typeSpeed: 45
    };

    let state = { 
        hasTypedLetter: false, 
        hasTypedPoem: false,
        musicPlaying: false,
        sidebarCollapsed: false
    };

    // Initialize floating hearts
    function initFloatingHearts() {
        const container = document.getElementById('floatingHearts');
        const hearts = ['üíñ', 'üíó', 'üíï', 'üíì', 'üíù'];
        
        for (let i = 0; i < 15; i++) {
            const heart = document.createElement('div');
            heart.className = 'floating-heart';
            heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
            heart.style.left = Math.random() * 100 + '%';
            heart.style.animationDelay = Math.random() * 12 + 's';
            heart.style.animationDuration = (10 + Math.random() * 5) + 's';
            container.appendChild(heart);
        }
    }

    // Welcome message
    window.onload = function() {
        setTimeout(() => {
            document.getElementById('welcomeMsg').classList.add('show');
        }, 500);
        initFloatingHearts();
        initGallery();
    };

    function closeWelcome() {
        const msg = document.getElementById('welcomeMsg');
        msg.style.animation = 'welcomeIn 0.6s reverse';
        setTimeout(() => {
            msg.classList.remove('show');
            msg.style.display = 'none';
        }, 600);
    }

    // Sidebar toggle
    function toggleSidebar() {
        const nav = document.getElementById('navRail');
        const stage = document.getElementById('stage');
        state.sidebarCollapsed = !state.sidebarCollapsed;
        
        if (state.sidebarCollapsed) {
            nav.classList.add('collapsed');
            stage.classList.add('sidebar-collapsed');
        } else {
            nav.classList.remove('collapsed');
            stage.classList.remove('sidebar-collapsed');
        }
    }

    // Music player
    function toggleMusic() {
        const music = document.getElementById('bgMusic');
        const btn = document.getElementById('musicBtn');
        const visualizer = document.getElementById('visualizer');
        const icon = document.getElementById('musicIcon');
        
        if (state.musicPlaying) {
            music.pause();
            btn.classList.remove('playing');
            visualizer.classList.remove('active');
            icon.innerHTML = '<path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"/>';
        } else {
            music.play().catch(e => {
                console.log('Music autoplay blocked. User interaction needed.');
            });
            btn.classList.add('playing');
            visualizer.classList.add('active');
            icon.innerHTML = '<path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>';
        }
        state.musicPlaying = !state.musicPlaying;
    }

    // Navigation
    function navTo(tabId, btn) {
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
        document.getElementById(tabId).classList.add('active');

        if (tabId === 'letter' && !state.hasTypedLetter) {
            typeWriter('letter-text', CONFIG.letter);
            state.hasTypedLetter = true;
        }
        if (tabId === 'poem' && !state.hasTypedPoem) {
            typeWriter('poem-display', CONFIG.poem);
            state.hasTypedPoem = true;
        }
    }

    // Typewriter effect
    function typeWriter(id, text) {
        const el = document.getElementById(id);
        el.innerHTML = '';
        let i = 0;
        
        function type() {
            if (i < text.length) {
                if (text.charAt(i) === '<') {
                    let tag = '';
                    while (text.charAt(i) !== '>' && i < text.length) {
                        tag += text.charAt(i);
                        i++;
                    }
                    tag += '>';
                    i++; 
                    el.innerHTML += tag;
                    setTimeout(type, 0); 
                } else {
                    el.innerHTML += text.charAt(i);
                    i++;
                    setTimeout(type, CONFIG.typeSpeed + (Math.random() * 20));
                }
            }
        }
        type();
    }

    // Gallery initialization
    async function initGallery() {
        const grid = document.getElementById('grid');
        try {
            const res = await fetch('data.zip');
            if(!res.ok) throw new Error("No Zip");
            const blob = await res.blob();
            const zip = await JSZip.loadAsync(blob);
            const images = Object.keys(zip.files).filter(f => !zip.files[f].dir && /\.(jpg|png|webp|jpeg)$/i.test(f));

            if(images.length === 0) {
                grid.innerHTML = `<div style="color:pink">No images found in data.zip!</div>`;
                return;
            }

            for(let file of images) {
                const imgData = await zip.files[file].async('blob');
                const url = URL.createObjectURL(imgData);
                const card = document.createElement('div');
                card.className = 'memory-card';
                card.innerHTML = `<div class="lock-screen"><div class="lock-icon">üîí</div></div><img src="${url}" loading="lazy">`;

                card.onclick = (e) => {
                    if(!card.classList.contains('revealed')) {
                        card.classList.add('revealed');
                        spawnHeart(e.clientX, e.clientY);
                        card.querySelector('.lock-icon').innerHTML = '‚ù§Ô∏è';
                    }
                };
                grid.appendChild(card);
            }
        } catch(e) {
            grid.innerHTML = `<div class="glass-paper" style="text-align:center"><h3>Setup Required üìÇ</h3><p>Please put your photos in a zip file named <b>data.zip</b> next to this file.</p></div>`;
        }
    }

    // Heart particle effect
    function spawnHeart(x, y) {
        const hearts = ['üíñ','‚ú®','üíã','ü¶ã','üíó','üíï','üíì'];
        const h = document.createElement('div');
        h.className = 'heart-particle';
        h.innerText = hearts[Math.floor(Math.random() * hearts.length)];
        h.style.left = x + 'px';
        h.style.top = y + 'px';
        document.body.appendChild(h);
        setTimeout(() => h.remove(), 1500);
    }
</script>
</body>
</html> 